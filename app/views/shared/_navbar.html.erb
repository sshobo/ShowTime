<div class="navbar navbar-expand-sm navbar-light navbar-lewagon">
  <div class="container-fluid ">
    <%= link_to "/", class: "navbar-brand" do %>
      <h1>Showtime</h1>
    <% end %>



    <div data-controller="search-videos" class="input-group d-flex justify-content-between">
       <div class="navbar-item">
    <ul class="navbar-nav me-auto">
  <li class="nav-item">
    <%= link_to "Home", root_path, class: "nav-link nav-link-border" %>
      </li>
  <li class="nav-item">
    <%= link_to "Series", videos_path, class: "nav-link nav-link-border" %>
  </li>
  <li class="nav-item">
    <%= link_to "Films", videos_path, class: "nav-link nav-link-border" %>
  </li>
  <li class="nav-item">
    <%= link_to "New", videos_path, class: "nav-link nav-link-border" %>
  </li>
  <li class="nav-item">
    <%= link_to "Popular", videos_path, class: "nav-link nav-link-border" %>
  </li>
  <li class="nav-item">
    <%= link_to "My Lists", videos_path, class: "nav-link" %>
  </li>
  <% if user_signed_in? %>
    <!-- Your existing user-related menu items here -->
  <% else %>
    <!-- Your existing login link here -->
  <% end %>
</ul>
    </div>
      <% if  params[:action] != "index" %>
        <div>
          <%= form_with url: videos_path, method: :get, html: { class: "form-outline", data: { search_videos_target: "form" } } do |f| %>
          <%= f.text_field :query,
                      class: "form-control",
                      placeholder: "Movie, TV Show..",
                      value: params[:query],
                      data: {
                        search_videos_target: "input",
                        action: "keyup->search-videos#update"
                      }
                      %>
          <% end %>
        </div>
     <% end %>
    </div>

    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav me-auto">
        <% if user_signed_in? %>
          <li class="nav-item dropdown">
            <a href="#" class="avatar" id="navbarDropdown" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              <% if current_user.profile.attached? %>
                <%= cl_image_tag current_user.profile.key, class: "avatar", alt: "dropdown menu" %>
              <% else %>
                <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/2/2c/Default_pfp.svg/680px-Default_pfp.svg.png?20220226140232" alt="Profile Picture" class="avatar">
              <% end %>
            </a>


            <div class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDropdown">
              <%= link_to "My Dashboard", dashboard_path,  class: "dropdown-item" %>
              <%= link_to "Content", videos_path,  class: "dropdown-item" %>
              <%= link_to "Settings", "Settings", class: "dropdown-item" %>
              <button data-controller="theme-toggler" class="dropdown-item" data-action="click->theme-toggler#toggleTheme">Toggle Dark-Mode</button>

              <div class="dropdown-divider"></div>
              <%= link_to "Log out", destroy_user_session_path, data: {turbo_method: :delete}, class: "dropdown-item" %>
            </div>
          </li>
        <% else %>
          <li class="nav-item">
            <%= link_to "Login", new_user_session_path, class: "nav-link" %>
          </li>
        <% end %>
      </ul>
    </div>
  </div>
</div>
